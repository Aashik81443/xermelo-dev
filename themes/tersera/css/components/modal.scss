@mixin modal-template {
    // These are included in the HTML to ease incorporating
    // them into authoring; the javascript scrapes and removes
    // them as part of initialization
    display: none;

    // Once presented inside a modal, they are visible
    .modal & {
        display: block;
    }
}

.modal {
    /*
        Properties
    */
    --modal-close-button-line-length: 4rem;
    --modal-close-button-line-thickness: 4px;
    --modal-close-button-color: #000;
    --modal-max-width: 136rem;

    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) translateZ(0);
    width: calc(
        100% -
        (
            2 *
            var(--grid-gutter-width)
        )
    );
    min-width: calc(
        #{$mobile-min-width} -
        (
            2 *
            var(--grid-gutter-width)
        )
    );
    max-width: var(--modal-max-width);
    max-height: calc(
        100% -
        (
            2 *
            var(--grid-gutter-width)
        )
    );
    pointer-events: none;

    // Note: this is the same value as used by the header,
    // but modals are placed at the end of the <body> element
    z-index: $z-index-modal;

    .modal__close-button {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        width: 6rem;
        height: 6rem;
        pointer-events: all;
        cursor: pointer;
        z-index: 2;
        -webkit-tap-highlight-color: transparent;
        
        @include media(">=small") {
            top: 1rem;
            right: 1rem;
        }

        span {
            position: absolute;
            top: calc((100% - var(--modal-close-button-line-thickness)) / 2);
            left: calc((100% - var(--modal-close-button-line-length)) / 2);
            display: block;
            width: var(--modal-close-button-line-length);
            height: var(--modal-close-button-line-thickness);
            border-radius: calc(var(--modal-close-button-line-thickness) / 2);
            background-color: var(--modal-close-button-color);
            transform-origin: center;

            &:nth-of-type(1) {
                transform: rotate(45deg);
            }

            &:nth-of-type(2) {
                transform: rotate(-45deg);
            }
        }
    }

    .modal__content {
        position: relative;
        padding: 5rem 3rem;
        background-color: #fff;
        box-shadow: rgba(#000, 0.2) 0 2px 10px;
        overflow: hidden;
        pointer-events: all;
        -webkit-overflow-scrolling: touch;
        
        @include media(">=small") {
            margin-top: 0;
            padding: 5rem;
        }
    }
}

// Prevent the content shifting horizontally due to
// the scroll bar appearing and disappearing
body.body--padding-applied {
    .modal {
        left: calc(
            50% -
            (
                0.5 *
                var(--body-right-padding, 0px)
            )
        );
    }
}
