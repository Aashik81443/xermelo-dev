(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:String(n)}var r="cne-locator",s="cne-locator__interface",a="cne-locator__intro__open-close-button",l="cne-locator--open",c="cne-locator--closing",u="cne-locator--selected",h="cne-locator--hidden",d=function(){function t(n){var i=this;if(e(this,t),this.isOpen=!1,this.selectedRegionIndex=null,this.container=n,this.interfaceContainer=this.container.querySelector(".".concat(s)),this.interfaceContainer&&(this.openCloseButton=this.container.querySelector(".".concat(a)),this.openCloseButton&&(this.unselectedMapImage=this.container.querySelector(".cne-locator__map img:not(*[data-region])"),this.unselectedMapImage))){this.regions=[];var o=this.container.querySelectorAll(".cne-locator__legend > li[data-region]"),r=(o=Array.from(o)).map((function(t){return t.getAttribute("data-region")}));(r=r.filter((function(t,e,n){return n.indexOf(t)===e}))).forEach((function(t){var e=o.filter((function(e){return e.getAttribute("data-region")==t})),n=i.container.querySelectorAll('.cne-locator__map svg *[data-region="'.concat(t,'"]'));if(n){var r=i.container.querySelector('.cne-locator__map img[data-region="'.concat(t,'"]'));if(r){var s=i.container.querySelector('.cne-locator__results > div[data-region="'.concat(t,'"]'));if(s){var a=i.regions.length,l=new f(e,n,r,s,(function(){m.call(i,a)}));i.regions.push(l)}}}})),this.openCloseButton.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),i.isOpen?i.closeInterface():i.openInterface()})),document.body.addEventListener("click",(function(t){t.target.closest("*[data-region]")||m.call(i,null)}))}}return i(t,[{key:"openInterface",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isOpen){this.isOpen=!0,this.timeline&&this.timeline.progress(1),this.container.classList.add(l);var n=0,i=this.interfaceContainer.getBoundingClientRect(),o=g();null!==o&&i.bottom>o&&(n=i.bottom-o);var r=v();if(null!==r){var s=i.top-n;s<r&&(n-=r-s)}if(0!=n){var a=Math.floor(window.scrollY+n);window.scrollTo({left:0,top:a,behavior:"smooth"})}var c=function(){t.timeline=null,t.interfaceContainer.removeAttribute("style")};e?c():(this.timeline=gsap.timeline(),this.timeline.from(this.interfaceContainer,.5,{ease:"power2.out",height:0},0),this.timeline.add(c))}}},{key:"closeInterface",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isOpen){this.isOpen=!1,this.timeline&&this.timeline.progress(1),this.container.classList.add(c),this.container.classList.remove(l);var n=function(){t.timeline=null,t.container.classList.remove(c),t.interfaceContainer.removeAttribute("style"),null!==t.selectedRegionIndex&&m.call(t,null)};e?n():(this.timeline=gsap.timeline(),this.timeline.to(this.interfaceContainer,.5,{ease:"power2.out",height:0},0),this.timeline.add(n))}}}],[{key:"init",value:function(){for(var e=document.getElementsByClassName(r),n=0;n<e.length;n++)new t(e[n])}}]),t}(),f=function(){function t(n,i,o,r,s){e(this,t),this.legendButtons=n,this.mapButtons=i,this.mapImage=o,this.resultContent=r,this.isSelected=!1;for(var a=0;a<this.legendButtons.length;a++)this.legendButtons[a].addEventListener("click",s);for(var l=0;l<this.mapButtons.length;l++)this.mapButtons[l].addEventListener("click",s)}return i(t,[{key:"setSelectedState",value:function(t){if(t!=this.isSelected)if(this.isSelected=t,this.isSelected){for(var e=0;e<this.legendButtons.length;e++)this.legendButtons[e].classList.add(u);for(var n=0;n<this.mapButtons.length;n++)this.mapButtons[n].classList.add(u);this.mapImage.classList.add(u),this.resultContent.classList.add(u)}else{for(var i=0;i<this.legendButtons.length;i++)this.legendButtons[i].classList.remove(u);for(var o=0;o<this.mapButtons.length;o++)this.mapButtons[o].classList.remove(u);this.mapImage.classList.remove(u),this.resultContent.classList.remove(u)}}}]),t}();function m(t){if(!(t===this.selectedRegionIndex||t<0||t>=this.regions.length)){var e,n;if(null!==this.selectedRegionIndex&&(e=this.regions[this.selectedRegionIndex]),null!==t&&(n=this.regions[t]),e&&e.setSelectedState(!1),n){n.setSelectedState(!0),e||this.unselectedMapImage.classList.add(h);var i=0,o=n.resultContent.getBoundingClientRect(),r=g();null!==r&&o.bottom>r&&(i=o.bottom-r);var s=v();if(null!==s){var a=o.top-i;a<s&&(i-=s-a)}if(0!=i){var l=Math.floor(window.scrollY+i);window.scrollTo({left:0,top:l,behavior:"smooth"})}}else e&&this.unselectedMapImage.classList.remove(h);this.selectedRegionIndex=t}}function g(){var t=document.getElementById("isi-tray");return t&&t.classList.contains("isi-tray--visible")?t.getBoundingClientRect().top:null}function v(){var t=document.querySelector(".header--sticky .header__fixed-container");return t?t.getBoundingClientRect().bottom:null}d.init()})();
//# sourceMappingURL=main.min.js.map