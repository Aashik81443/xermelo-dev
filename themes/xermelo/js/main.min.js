(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(void 0,o=function(t,n){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!==e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(s.key),"symbol"===e(o)?o:String(o)),s)}var o}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var s={classNames:{container:"cne-locator",interfaceContainer:"cne-locator__interface",openCloseButton:"cne-locator__intro__open-close-button",open:"cne-locator--open",closing:"cne-locator--closing",selected:"cne-locator--selected",hidden:"cne-locator--hidden"}},o=function(){function e(n){var i=this;if(t(this,e),this.isOpen=!1,this.selectedRegionIndex=null,this.container=n,this.interfaceContainer=this.container.querySelector(".".concat(s.classNames.interfaceContainer)),this.interfaceContainer&&(this.openCloseButton=this.container.querySelector(".".concat(s.classNames.openCloseButton)),this.openCloseButton&&(this.unselectedMapImage=this.container.querySelector(".cne-locator__map img:not(*[data-region])"),this.unselectedMapImage))){this.regions=[];var o=this.container.querySelectorAll(".cne-locator__legend > li[data-region]"),l=(o=Array.from(o)).map((function(e){return e.getAttribute("data-region")}));(l=l.filter((function(e,t,n){return n.indexOf(e)===t}))).forEach((function(e){var t=o.filter((function(t){return t.getAttribute("data-region")==e})),n=i.container.querySelectorAll('.cne-locator__map svg *[data-region="'.concat(e,'"]'));if(n){var s=i.container.querySelector('.cne-locator__map img[data-region="'.concat(e,'"]'));if(s){var l=i.container.querySelector('.cne-locator__results > div[data-region="'.concat(e,'"]'));if(l){var c=i.regions.length,u=new a(t,n,s,l,(function(){r.call(i,c)}));i.regions.push(u)}}}})),this.openCloseButton.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),i.isOpen?i.closeInterface():i.openInterface()})),document.body.addEventListener("click",(function(e){e.target.closest("*[data-region]")||r.call(i,null)}))}}return i(e,[{key:"openInterface",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isOpen){this.isOpen=!0,this.timeline&&this.timeline.progress(1),this.container.classList.add(s.classNames.open);var n=0,i=this.interfaceContainer.getBoundingClientRect(),o=l();null!==o&&i.bottom>o&&(n=i.bottom-o);var a=c();if(null!==a){var r=i.top-n;r<a&&(n-=a-r)}if(0!=n){var u=Math.floor(window.scrollY+n);window.scrollTo({left:0,top:u,behavior:"smooth"})}var d=function(){e.timeline=null,e.interfaceContainer.removeAttribute("style")};t?d():(this.timeline=gsap.timeline(),this.timeline.from(this.interfaceContainer,.5,{ease:"power2.out",height:0},0),this.timeline.add(d))}}},{key:"closeInterface",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isOpen){this.isOpen=!1,this.timeline&&this.timeline.progress(1),this.container.classList.add(s.classNames.closing),this.container.classList.remove(s.classNames.open);var n=function(){e.timeline=null,e.container.classList.remove(s.classNames.closing),e.interfaceContainer.removeAttribute("style"),null!==e.selectedRegionIndex&&r.call(e,null)};t?n():(this.timeline=gsap.timeline(),this.timeline.to(this.interfaceContainer,.5,{ease:"power2.out",height:0},0),this.timeline.add(n))}}}],[{key:"init",value:function(){for(var t=document.getElementsByClassName(s.classNames.container),n=0;n<t.length;n++)new e(t[n])}}]),e}(),a=function(){function e(n,i,s,o,a){t(this,e),this.legendButtons=n,this.mapButtons=i,this.mapImage=s,this.resultContent=o,this.isSelected=!1;for(var r=0;r<this.legendButtons.length;r++)this.legendButtons[r].addEventListener("click",a);for(var l=0;l<this.mapButtons.length;l++)this.mapButtons[l].addEventListener("click",a)}return i(e,[{key:"setSelectedState",value:function(e){if(e!=this.isSelected)if(this.isSelected=e,this.isSelected){for(var t=0;t<this.legendButtons.length;t++)this.legendButtons[t].classList.add(s.classNames.selected);for(var n=0;n<this.mapButtons.length;n++)this.mapButtons[n].classList.add(s.classNames.selected);this.mapImage.classList.add(s.classNames.selected),this.resultContent.classList.add(s.classNames.selected)}else{for(var i=0;i<this.legendButtons.length;i++)this.legendButtons[i].classList.remove(s.classNames.selected);for(var o=0;o<this.mapButtons.length;o++)this.mapButtons[o].classList.remove(s.classNames.selected);this.mapImage.classList.remove(s.classNames.selected),this.resultContent.classList.remove(s.classNames.selected)}}}]),e}();function r(e){if(!(e===this.selectedRegionIndex||e<0||e>=this.regions.length)){var t,n;if(null!==this.selectedRegionIndex&&(t=this.regions[this.selectedRegionIndex]),null!==e&&(n=this.regions[e]),t&&t.setSelectedState(!1),n){n.setSelectedState(!0),t||this.unselectedMapImage.classList.add(s.classNames.hidden);var i=0,o=n.resultContent.getBoundingClientRect(),a=l();null!==a&&o.bottom>a&&(i=o.bottom-a);var r=c();if(null!==r){var u=o.top-i;u<r&&(i-=r-u)}if(0!=i){var d=Math.floor(window.scrollY+i);window.scrollTo({left:0,top:d,behavior:"smooth"})}}else t&&this.unselectedMapImage.classList.remove(s.classNames.hidden);this.selectedRegionIndex=e}}function l(){var e=document.getElementById("isi-tray");return e&&e.classList.contains("isi-tray--visible")?e.getBoundingClientRect().top:null}function c(){var e=document.querySelector(".header--sticky .header__fixed-container");return e?e.getBoundingClientRect().bottom:null}o.init()})();
//# sourceMappingURL=main.min.js.map